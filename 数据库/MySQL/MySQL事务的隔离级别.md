bilibili：[【MySQL】事务与隔离级别（99%的人存在误区）](https://www.bilibili.com/video/BV16J411m7qi)

配套文档：https://github.com/hongwen1993/all/blob/master/database/Isolation.md

### 1.1.1. MySQL事务的隔离级别?

| 事务隔离级别                 | 脏读 | 不可重复读 | 幻读 |
| ---------------------------- | ---- | ---------- | ---- |
| 读未提交（read-uncommitted） | 会   | 会         | 会   |
| 不可重复读（read-committed） | -    | 会         | 会   |
| 可重复读（repeatable-read）  | -    | -          | 会   |
| 串行化（serializable）       | -    | -          | -    |

- READ UNCOMMITED (未提交读)

    在 read uncommited级别, 事务中的修改,即使没有提交,对其他事务也都是可见的, 事务可以读取未提交的数据,这也被称为脏读(DIrty Read).这个级别会导致很多问题,从性能上说, Read Uncommited 不会比其他的级别好太多,但缺乏其他级别的很多好处,除非真的非常必要的理由,在实际应用中一般很少使用

- READ COMMITED (提交读)

    大多数数据库系统的默认隔离级别都是 Read Commited (但MySQL不是), Read Commited满足前面提到的隔离性的简单定义: 一个事务开始时,只能 "看见" 已经提交的事务所做的修改, 换句话说, 一个事务从开始直到提交之前,所做的任何修改对其他事务都是不可见的. 这个级别有时候也叫做不可重复读 (nonrepeatable read),因为两次执行同样的查询,可能会得到不一样的结果

- Repeatable Read (可重复读)

    Repeatable Read 解决了脏读的问题,该级别保证了同一个事务多次读取同样的记录的结果是一致的, 但是理论上,可重复读隔离级别还是无法解决另外一个幻读(Phantom Read)的问题, 所谓幻读, 指的是当某个事务再次读取某个范围内的记录时,另外一个事务又在该范围内插入了新的记录,当之前的事务再次读取该范围的记录时,会产生幻行(Phantom Row), InnoDB 和 XtraDB 存储引擎通过多版本并发控制(MVCC)解决了幻读的问题

    可重复读是 MySQL的默认事务隔离级别

- Serializable (可串行化)

    Serializable 是最高的隔离级别, 它通过强制事务串行执行, 避免了前面说的幻读的问题,简单来说,Serializable会在读取的每一行数据上都加锁,所以可能导致大量的超时和锁争用的问题,实际应用中也很少用到这个隔离级别,只有在非常需要确保数据的一致性而且可以接受没有并发的情况下,才考虑采用该级别

    > [叶落山城秋](https://www.iphpt.com/): 总是说上面这些东西,今天才认真看了下,结果看懵逼了.. 脏读很好理解,就是可能读取了别的事务还没提交的数据(这数据可能是无用的数据,可能要回滚的). 不可重复读也好理解,就是两次读的数据结果可能不一样,比如我正在事务里查询记录,第一次查 是2条数据,然后我还没提交事务,另外一个事务插入了新的数据,然后我再查了一遍,发现这时候是三条数据了.. 此时我事务还没提交! 这就是不可重复读! 可重复读正好相反,只要我查询还在同一个事务里,结果永远是一样的!不管真实数据是否已经修改了..
    >
    > 不过这个幻读.. 我看了书还有各种说法,说法不一..
    >
    > 一种说法是 A查询数据是两条,B查询也是两条,然后A插入了一条数据, B还在之前的事务里,因为是可重复读,所以B再次查询还是原来的数据,但是B想插入第三条(id = 3)的数据,发现插入不了,但是查询还是两条数据..
    >
    > 另外一种说法是 A把数据表某个字段的数据都从"1"改成了"2",与此同时,B往表里插入了新的数据,这个字段的值依然是"1"插入的,等A更新完后,再次查询,发现表里还有数据未改变..
    >
    > 参考:
    >
    > [go 夜读](https://reading.developerlearning.cn/interview/interview-database/)
    >
    > [高性能MySQL](http://interview.wzcu.com/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html)
    >
    > [MySQL的四种事务隔离级别](https://www.cnblogs.com/huanongying/p/7021555.html)
